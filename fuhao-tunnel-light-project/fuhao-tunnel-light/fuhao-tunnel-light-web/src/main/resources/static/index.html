<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="fuhao tunnel-light">
    <title>index | fuhao tunnel-light</title>

    <link rel="stylesheet" href="base/css/pure-min.css"/>
    <link rel="stylesheet" href="base/css/grids-responsive-min.css"/>
    <link rel="stylesheet" href="base/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="main/css/styles.css"/>
</head>
<body>
<div id="wrapper">
    <div class="headerWrap"></div>
    <div class="banner">
        <div class="banner-content">
            <h1>Welcome to fuhao tunnel-light</h1>
            <h3>I offer you the bitterness of a man who has looked long and long at the lonely moon.</h3>
        </div>
    </div>
    <div id="content" class="index">
        <div class="pure-g">

            <div class="pure-u-1 pure-u-md-1-2">
                <div class="l-box">
                    <h2>
                        <a href="/tunnel-light/" class="atom"><i class="fa fa-rss"></i></a>
                        Project News
                    </h2>
                    <ul class="home-list">

                        <li>
                            <time class="nowTime"></time>
                            <a href=""> a wlte static new 0 </a></li>

                        <li>
                            <time>2017-05-24</time>
                            <a href=""> a wlte static new 1 </a></li>

                        <li>
                            <time>2017-05-24</time>
                            <a href=""> a wlte static new 2 </a></li>

                        <li>
                            <time>2017-05-24</time>
                            <a href=""> a wlte static new 3 </a></li>

                        <li>
                            <time>2017-05-24</time>
                            <a href=""> a wlte static new 4 </a></li>

                        <li>
                            <time>2017-05-24</time>
                            <a href=""> a wlte static new 5 </a></li>

                        <li>
                            <time>2017-05-24</time>
                            <a href=""> a wlte static new 6 </a></li>

                        <li>
                            <time>2017-05-24</time>
                            <a href=""> a wlte static new 7 </a></li>

                    </ul>
                    <a class="pure-button read-more" href="/">Read more</a>
                </div>
            </div>

            <div class="pure-u-1 pure-u-md-1-2">
                <div class="l-box">
                    <h2>
                        <a href="/" class="excellent-articles">
                            <i class="fa fa-file-text-o"></i>
                        </a>
                        Excellent Articles
                    </h2>
                    <ul class="home-list">

                        <li>
                            <time datetime="2018-03-11T23:00:55+00:00">2018-03-11</time>
                            <a href="main/page/projects/uuid-online.html"> excellent articles 0 </a></li>

                        <li>
                            <time datetime="2018-03-11T23:00:55+00:00">2018-03-11</time>
                            <a href="main/page/projects/uuid-online.html"> excellent articles 1 </a></li>

                        <li>
                            <time datetime="2018-03-11T23:00:55+00:00">2018-03-11</time>
                            <a href="main/page/projects/uuid-online.html"> excellent articles 2 </a></li>

                        <li>
                            <time datetime="2018-03-11T23:00:55+00:00">2018-03-11</time>
                            <a href="main/page/projects/uuid-online.html"> excellent articles 3 </a></li>

                        <li>
                            <time datetime="2018-03-11T23:00:55+00:00">2018-03-11</time>
                            <a href="main/page/projects/uuid-online.html"> excellent articles 4 </a></li>

                        <li>
                            <time datetime="2018-03-11T23:00:55+00:00">2018-03-11</time>
                            <a href="main/page/projects/uuid-online.html"> excellent articles 5 </a></li>

                        <li>
                            <time datetime="2018-03-11T23:00:55+00:00">2018-03-11</time>
                            <a href="main/page/projects/uuid-online.html"> excellent articles 6 </a></li>

                        <li>
                            <time datetime="2018-03-11T23:00:55+00:00">2018-03-11</time>
                            <a href="main/page/projects/uuid-online.html"> excellent articles 7 </a></li>

                    </ul>
                    <a class="pure-button read-more" href="/">Read more</a>
                </div>
            </div>

        </div> <!-- end pure-g -->
    </div> <!-- end content -->
    <div class="footerWrap"></div>
</div> <!-- end wrapper -->
<script src="base/js/jquery.min.js"></script>
<script src="base/js/common.js"></script>
<script src="base/js/intervalBackImg.js"></script>
<script>
    (function ($) {
        $(".nowTime").text(formatDate(new Date(Date.now())));

        var getMonthWeek = function (a, b, c) {
            var date = new Date(a, parseInt(b) - 1, c),
                w = date.getDay(),
                d = date.getDate();
            return Math.ceil((d + 6 - w) / 7);
        };

        var restaurants = ["腾讯希格玛", "骨汤菜饭", "快乐E族", "大排饭", "山西面馆"];
        toLunch(restaurants);

        function toLunch(restaurant) {
            var today = new Date();
            var y = today.getFullYear();
            var m = today.getMonth() + 1;
            var d = today.getDate();
            var WeekOfMonth = today.getHours() < 14 ? getMonthWeek(y, m, d) : getMonthWeek(y, m, d) + 10;
            var dayOfWeek = today.getDay() - 1; //日:-1 一:0 六:5

            var key = "@" + WeekOfMonth + "week" + m + "month" + y + "year";
            var fuzzy = truncate(key.split(''), restaurant.length).split('');

            var depth = fuzzy.length;
            var precise = [];
            var cursor = 0;
            while (cursor < depth) {
                var min;
                var k = 0;
                for (; k < depth; k++) {
                    var v = fuzzy[k];
                    if (v != null) {
                        min = fuzzy[k];
                        break;
                    }
                }
                var reamer = min;
                var tempV;
                for (var fu_i = 0; fu_i < depth; fu_i++) {
                    if (fu_i === k) {
                        continue;
                    }
                    var temp = fuzzy[fu_i];
                    if (temp != null && temp < min) {
                        min = temp;
                        tempV = fu_i;
                    }
                }
                if (reamer === min) {
                    precise[k] = cursor;
                    fuzzy[k] = null;
                } else {
                    precise[tempV] = cursor;
                    fuzzy[tempV] = null;
                }
                cursor++;
            }

            if (depth < 7 && dayOfWeek >= depth) {
                dayOfWeek >>= (WeekOfMonth % (WeekOfMonth === 3 ? 2 : 3));
            }

            $("#lunch").text(restaurant[precise[Math.abs(dayOfWeek)]]);

        }

        /**
         * 截断
         */
        function truncate(target, digits) {
            //量级
            var DIGITS_POWER = [1, 10, 100, 1000, 10000, 100000, 1000000, 10000000, 100000000];
            var result;
            var offset = target[target.length - 1] & 0xf;
            var binary = ((target[offset] & 0x7f) << 24)
                | ((target[offset + 1] & 0xff) << 16)
                | ((target[offset + 2] & 0xff) << 8) | (target[offset + 3] & 0xff);
            var otp = binary % (DIGITS_POWER[digits]);
            result = "" + otp;
            while (result.length < digits) {
                result = "0" + result;
            }
            return result;
        }


        function formatDate(now) {
            var year = now.getFullYear();
            var month = now.getMonth() + 1;
            var date = now.getDate();

            var month_head = month < 10 ? "0" : "";
            var date_head = date < 10 ? "0" : "";

            var week = "星期";
            switch (now.getDay()) {
                case 0:
                    week += "日";
                    break;
                case 1:
                    week += "一";
                    break;
                case 2:
                    week += "二";
                    break;
                case 3:
                    week += "三";
                    break;
                case 4:
                    week += "四";
                    break;
                case 5:
                    week += "五";
                    break;
                case 6:
                    week += "六";
                    break;
            }

            return year + "-" + month_head + month + "-" + date_head + date + "   " + week;
        }

    })(jQuery);
</script>
</body>
</html>
        